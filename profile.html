<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StarStream - Select Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Poppins', sans-serif; background: #111827; color: white; }
    .fade-in { opacity: 0; animation: fadeIn 1s forwards; }
    @keyframes fadeIn { to { opacity: 1; } }
    .profile-card:hover { transform: scale(1.05); }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen px-4">

  <h1 class="text-3xl sm:text-4xl font-bold mb-6 text-indigo-400">Who's Watching?</h1>

  <div id="profiles" class="grid grid-cols-2 sm:grid-cols-3 gap-6 mb-6"></div>

  <form id="profileForm" class="flex flex-col sm:flex-row gap-4">
    <input type="text" id="username" placeholder="Add new profile" required
           class="px-4 py-2 rounded-lg text-black w-full sm:w-auto" />
    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 px-6 py-2 rounded-lg font-semibold transition">
      Add & Continue
    </button>
  </form>

  <script>
    const profilesContainer = document.getElementById('profiles');
    const profileForm = document.getElementById('profileForm');

    function loadProfiles() {
      profilesContainer.innerHTML = '';
      const profiles = JSON.parse(localStorage.getItem('starstreamProfiles')) || [];
      profiles.forEach(name => {
        const card = document.createElement('div');
        card.className = "profile-card bg-gray-800 rounded-lg flex items-center justify-center h-24 cursor-pointer font-semibold text-lg transition transform duration-200 fade-in";
        card.textContent = name;
        card.addEventListener('click', () => {
          localStorage.setItem('starstreamActiveProfile', name);
          // Fade out then go to main site
          document.body.classList.add('opacity-0', 'transition', 'duration-700');
          setTimeout(() => window.location.href = 'index.html', 700);
        });
        profilesContainer.appendChild(card);
      });
    }

    profileForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      if (!username) return;

      let profiles = JSON.parse(localStorage.getItem('starstreamProfiles')) || [];
      if (!profiles.includes(username)) profiles.push(username);

      localStorage.setItem('starstreamProfiles', JSON.stringify(profiles));
      localStorage.setItem('starstreamActiveProfile', username);

      // Fade out then go to main site
      document.body.classList.add('opacity-0', 'transition', 'duration-700');
      setTimeout(() => window.location.href = 'index.html', 700);
    });

    loadProfiles();
  </script>

</body>
</html>
